(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d51196c"],{"11c1":function(e,t,n){var r=n("c437"),a=n("c64e"),c=a;c.v1=r,c.v4=a,e.exports=c},2366:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function a(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}e.exports=a},"3ab1":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={ref:"roomEl",class:"room h-full grid grid-cols-1 sm:grid-cols-2 auto-rows-auto gap-1"};function c(e,t,n,c,o,s){return Object(r["m"])(),Object(r["c"])("div",a,null,512)}var o=n("1da1"),s=(n("96cf"),n("159b"),n("a1e9")),i=n("5c40"),u=n("5502"),d=n("6c02"),l=n("4286"),f=n("c5f4"),p=n("11c1"),m={name:"Room",setup:function(){var e,t,n=Object(u["b"])(),r=Object(d["c"])(),a=Object(s["j"])(null),c=Object(i["d"])((function(){return n.getters.getUsername})),m=Object(i["d"])((function(){return n.getters.getMediaStream})),v=0;if(""!==c.value)return l["b"].onmessage=function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(r){var a,c,s,i,u,d,f,p,m,v,h,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=r.data,a=JSON.parse(a),console.log(a),"newUserJoin"!==a.event){n.next=10;break}return n.next=6,e.createOffer();case 6:return c=n.sent,n.next=9,e.setLocalDescription(c);case 9:l["b"].send(JSON.stringify({event:"offer",id:t,payload:c}));case 10:if("offer"!==a.event){n.next=19;break}return n.next=13,e.setRemoteDescription(a.payload);case 13:return n.next=15,e.createAnswer();case 15:return s=n.sent,n.next=18,e.setLocalDescription(s);case 18:l["b"].send(JSON.stringify({event:"answer",id:a.id,payload:s}));case 19:if("answer"!==a.event||a.id!==t){n.next=34;break}return n.next=22,e.setRemoteDescription(a.payload);case 22:i=document.querySelector(".room"),u=document.createElement("table"),u.innerHTML='\n        <tr>\n          <th class="px-2">timestamp</th>\n          <th class="px-2">bytesSent</th>\n          <th class="px-2">frameHeight</th>\n          <th class="px-2">frameWidth</th>\n          <th class="px-2">framesPerSecond</th>\n          <th class="px-2">packetsSent</th>\n        </tr>\n        <tr>\n          <td class="timestamp">-</td>\n          <td class="bytesSent">-</td>\n          <td class="frameHeight">-</td>\n          <td class="frameWidth">-</td>\n          <td class="framesPerSecond">-</td>\n          <td class="packetsSent">-</td>\n        </tr>',i.append(u),d=document.querySelector(".timestamp"),f=document.querySelector(".bytesSent"),p=document.querySelector(".frameHeight"),m=document.querySelector(".frameWidth"),v=document.querySelector(".framesPerSecond"),h=document.querySelector(".packetsSent"),b=1,setInterval(Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.peerConnection.getStats(null);case 2:n=t.sent,n.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.kind&&(console.log(b),d.innerText=b,f.innerText=e.bytesSent,p.innerText=e.frameHeight,m.innerText=e.frameWidth,v.innerText=e.framesPerSecond,h.innerText=e.packetsSent,b++)}));case 4:case"end":return t.stop()}}),t)}))),1e3);case 34:"candidate"===a.event&&e.addIceCandidate(a.payload);case 35:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Object(i["t"])(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:h(0,m.value),e=new f["a"],t=Object(p["v4"])(),console.log(t),e.createPeerConnection(),e.onIceCandidate(l["b"]),e.peerConnection.ontrack=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.streams,r=document.querySelector(".room"),a=document.createElement("video"),a.classList.add("h-full","w-full","object-cover"),a.setAttribute("autoplay",""),a.srcObject=n[0],0===v&&r.appendChild(a),v++;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.addTrackToPeerConnection(m.value),l["b"].send(JSON.stringify({event:"newUserJoin",id:t}));case 9:case"end":return n.stop()}}),n)})))),Object(i["r"])((function(){b()})),{roomEl:a};function h(e,t){var n=document.createElement("video");n.classList.add("h-full","w-full","object-cover"),n.setAttribute("autoplay",""),n.volume=e,n.srcObject=t,a.value.appendChild(n)}function b(){m.value.getTracks().forEach((function(e){return e.stop()}))}r.push({path:"/"})}};m.render=c;t["default"]=m},c437:function(e,t,n){var r,a,c=n("e1f4"),o=n("2366"),s=0,i=0;function u(e,t,n){var u=t&&n||0,d=t||[];e=e||{};var l=e.node||r,f=void 0!==e.clockseq?e.clockseq:a;if(null==l||null==f){var p=c();null==l&&(l=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=a=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:i+1,h=m-s+(v-i)/1e4;if(h<0&&void 0===e.clockseq&&(f=f+1&16383),(h<0||m>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,i=v,a=f,m+=122192928e5;var b=(1e4*(268435455&m)+v)%4294967296;d[u++]=b>>>24&255,d[u++]=b>>>16&255,d[u++]=b>>>8&255,d[u++]=255&b;var y=m/4294967296*1e4&268435455;d[u++]=y>>>8&255,d[u++]=255&y,d[u++]=y>>>24&15|16,d[u++]=y>>>16&255,d[u++]=f>>>8|128,d[u++]=255&f;for(var g=0;g<6;++g)d[u+g]=l[g];return t||o(d)}e.exports=u},c64e:function(e,t,n){var r=n("e1f4"),a=n("2366");function c(e,t,n){var c=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[c+s]=o[s];return t||a(o)}e.exports=c},e1f4:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}}}]);
//# sourceMappingURL=chunk-2d51196c.2a6152d1.js.map